<div style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
  <!-- Header Section -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid rgba(79, 70, 229, 0.3);">
    <div>
      <h1 style="font-size: 2rem; font-weight: 700; color: #ffffff; margin-bottom: 0.5rem;">Admin Dashboard</h1>
      <p style="color: #9ca3af; font-size: 0.875rem;">Manage your restaurant reservations</p>
    </div>
    
    <!-- View Type Toggles -->
    <div style="display: flex; gap: 0.5rem; background-color: rgba(255, 255, 255, 0.05); padding: 0.25rem; border-radius: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
      <%= link_to admin_root_path(view: 'daily', date: @date), 
          style: "padding: 0.5rem 1rem; border-radius: 0.375rem; text-decoration: none; font-weight: 500; transition: all 0.2s; #{@view_type == 'daily' ? 'background: linear-gradient(135deg, #4f46e5 0%, #818cf8 100%); color: white; box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);' : 'color: #d1d5db;'}",
          onmouseover: "if ('#{@view_type != 'daily'}' === 'true') { this.style.backgroundColor='rgba(255, 255, 255, 0.1)'; }",
          onmouseout: "if ('#{@view_type != 'daily'}' === 'true') { this.style.backgroundColor='transparent'; }" do %>
        Daily
      <% end %>
      <%= link_to admin_root_path(view: 'weekly', date: @date), 
          style: "padding: 0.5rem 1rem; border-radius: 0.375rem; text-decoration: none; font-weight: 500; transition: all 0.2s; #{@view_type == 'weekly' ? 'background: linear-gradient(135deg, #4f46e5 0%, #818cf8 100%); color: white; box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);' : 'color: #d1d5db;'}",
          onmouseover: "if ('#{@view_type != 'weekly'}' === 'true') { this.style.backgroundColor='rgba(255, 255, 255, 0.1)'; }",
          onmouseout: "if ('#{@view_type != 'weekly'}' === 'true') { this.style.backgroundColor='transparent'; }" do %>
        Weekly
      <% end %>
      <%= link_to admin_root_path(view: 'monthly', date: @date), 
          style: "padding: 0.5rem 1rem; border-radius: 0.375rem; text-decoration: none; font-weight: 500; transition: all 0.2s; #{@view_type == 'monthly' ? 'background: linear-gradient(135deg, #4f46e5 0%, #818cf8 100%); color: white; box-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);' : 'color: #d1d5db;'}",
          onmouseover: "if ('#{@view_type != 'monthly'}' === 'true') { this.style.backgroundColor='rgba(255, 255, 255, 0.1)'; }",
          onmouseout: "if ('#{@view_type != 'monthly'}' === 'true') { this.style.backgroundColor='transparent'; }" do %>
        Monthly
      <% end %>
    </div>
  </div>

  <!-- Date Navigation -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(31, 41, 55, 0.5) 0%, rgba(17, 24, 39, 0.5) 100%); border-radius: 0.75rem; border: 1px solid rgba(79, 70, 229, 0.2);">
    <% 
      prev_date = case @view_type
                  when 'daily' then @date - 1.day
                  when 'weekly' then @date - 1.week
                  when 'monthly' then @date - 1.month
                  end
      next_date = case @view_type
                  when 'daily' then @date + 1.day
                  when 'weekly' then @date + 1.week
                  when 'monthly' then @date + 1.month
                  end
    %>
    
    <%= link_to admin_root_path(view: @view_type, date: prev_date), 
        style: "color: #818cf8; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: all 0.2s;",
        onmouseover: "this.style.backgroundColor='rgba(79, 70, 229, 0.15)';",
        onmouseout: "this.style.backgroundColor='transparent';" do %>
      Previous
    <% end %>
    
    <h2 style="font-size: 1.5rem; font-weight: 600; color: #ffffff;">
      <% case @view_type %>
      <% when 'daily' %>
        <%= @date.strftime("%A, %B %d, %Y") %>
      <% when 'weekly' %>
        <%= @start_date.strftime("%b %d") %> - <%= @end_date.strftime("%b %d, %Y") %>
      <% when 'monthly' %>
        <%= @date.strftime("%B %Y") %>
      <% end %>
    </h2>
    
    <%= link_to admin_root_path(view: @view_type, date: next_date), 
        style: "color: #818cf8; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: all 0.2s;",
        onmouseover: "this.style.backgroundColor='rgba(79, 70, 229, 0.15)';",
        onmouseout: "this.style.backgroundColor='transparent';" do %>
      Next
    <% end %>
  </div>

  <!-- Calendar View -->
  <% if @view_type == 'daily' %>
    <!-- Daily View -->
    <div style="background: linear-gradient(135deg, rgba(31, 41, 55, 0.6) 0%, rgba(17, 24, 39, 0.6) 100%); border-radius: 0.75rem; padding: 2rem; border: 1px solid rgba(79, 70, 229, 0.2); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);">
      <% date_slots = @time_slots.select { |slot| slot.start_time.to_date == @date } %>
      <% if date_slots.any? %>
        <% date_slots.each do |slot| %>
          <div class="time-slot-card" 
               data-slot-id="<%= slot.id %>"
               data-slot-time="<%= slot.start_time.strftime("%l:%M %p") %>"
               data-slot-date="<%= slot.start_time.strftime("%A, %B %d, %Y") %>"
               data-max-tables="<%= slot.max_tables %>"
               data-table-capacity="<%= slot.table_capacity %>"
               data-reservation-count="<%= slot.reservations.count %>"
               style="border-left: 4px solid #4f46e5; padding-left: 1.5rem; margin-bottom: 2rem; background-color: rgba(255, 255, 255, 0.03); padding: 1.5rem; border-radius: 0 0.5rem 0.5rem 0; cursor: pointer; transition: all 0.2s;"
               onmouseover="this.style.backgroundColor='rgba(79, 70, 229, 0.1)'; this.style.transform='translateX(4px)';"
               onmouseout="this.style.backgroundColor='rgba(255, 255, 255, 0.03)'; this.style.transform='translateX(0)';"
               onclick="openReservationModal(<%= slot.id %>)">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
              <h3 style="font-size: 1.25rem; font-weight: 600; color: #ffffff;">
                <%= slot.start_time.strftime("%l:%M %p") %>
              </h3>
              <span style="color: #9ca3af; font-size: 0.875rem; padding: 0.375rem 0.75rem; background-color: rgba(79, 70, 229, 0.15); border-radius: 9999px; border: 1px solid rgba(79, 70, 229, 0.3);">
                <%= slot.reservations.count %>/<%= slot.max_tables %> tables booked
              </span>
            </div>
            
            <% if slot.reservations.any? %>
              <div style="display: grid; gap: 0.75rem; margin-top: 1rem;">
                <% slot.reservations.each do |reservation| %>
                  <div class="reservation-data-<%= slot.id %>" 
                       data-user-name="<%= reservation.user.full_name %>"
                       data-user-email="<%= reservation.user.email %>"
                       data-user-phone="<%= reservation.user.contact_number %>"
                       data-party-size="<%= reservation.party_size %>"
                       data-table-capacity="<%= reservation.table_capacity %>"
                       data-reservation-id="<%= reservation.id %>"
                       style="background-color: rgba(79, 70, 229, 0.1); padding: 1rem; border-radius: 0.5rem; border: 1px solid rgba(79, 70, 229, 0.2);">
                    <strong style="color: #818cf8;"><%= reservation.user.full_name %></strong> 
                    <span style="color: #d1d5db;">- Party of <%= reservation.party_size %></span>
                    <span style="color: #9ca3af; font-size: 0.875rem;">(Table capacity: <%= reservation.table_capacity %>)</span>
                  </div>
                <% end %>
              </div>
            <% else %>
              <p style="color: #6b7280; font-style: italic;">No reservations yet</p>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <p style="color: #9ca3af; text-align: center; padding: 3rem;">No time slots scheduled for this day.</p>
      <% end %>
    </div>

  <% elsif @view_type == 'weekly' %>
    <!-- Weekly View -->
    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 1rem;">
      <% (@start_date..@end_date).each do |date| %>
        <div style="background: linear-gradient(135deg, rgba(31, 41, 55, 0.6) 0%, rgba(17, 24, 39, 0.6) 100%); border-radius: 0.75rem; padding: 1.25rem; border: 1px solid rgba(79, 70, 229, 0.2); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);">
          <div style="text-align: center; border-bottom: 1px solid rgba(79, 70, 229, 0.2); padding-bottom: 0.75rem; margin-bottom: 0.75rem;">
            <div style="font-weight: 600; color: #9ca3af; font-size: 0.875rem;"><%= date.strftime("%a") %></div>
            <div style="font-size: 1.75rem; font-weight: 700; color: <%= date == Date.today ? '#818cf8' : '#ffffff' %>; margin-top: 0.25rem;"><%= date.day %></div>
          </div>
          
          <% day_reservations = @reservations_by_date[date] || [] %>
          <% if day_reservations.any? %>
            <div style="font-size: 0.875rem;">
              <% day_reservations.first(3).each do |item| %>
                <div class="time-slot-card"
                     data-slot-id="<%= item[:time_slot].id %>"
                     data-slot-time="<%= item[:time_slot].start_time.strftime("%l:%M %p") %>"
                     data-slot-date="<%= item[:time_slot].start_time.strftime("%A, %B %d, %Y") %>"
                     data-max-tables="<%= item[:time_slot].max_tables %>"
                     data-table-capacity="<%= item[:time_slot].table_capacity %>"
                     data-reservation-count="<%= item[:time_slot].reservations.count %>"
                     onclick="openReservationModal(<%= item[:time_slot].id %>)"
                     style="background: linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(79, 70, 229, 0.1) 100%); padding: 0.5rem; border-radius: 0.375rem; margin-bottom: 0.5rem; border-left: 2px solid #4f46e5; color: #e5e7eb; cursor: pointer; transition: all 0.2s;"
                     onmouseover="this.style.backgroundColor='rgba(79, 70, 229, 0.3)';"
                     onmouseout="this.style.background='linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(79, 70, 229, 0.1) 100%)';">
                  <%= item[:time_slot].start_time.strftime("%l:%M%p") %>
                  <% item[:time_slot].reservations.each do |reservation| %>
                    <div class="reservation-data-<%= item[:time_slot].id %>" style="display: none;"
                         data-user-name="<%= reservation.user.full_name %>"
                         data-user-email="<%= reservation.user.email %>"
                         data-user-phone="<%= reservation.user.contact_number %>"
                         data-party-size="<%= reservation.party_size %>"
                         data-table-capacity="<%= reservation.table_capacity %>"
                         data-reservation-id="<%= reservation.id %>">
                    </div>
                  <% end %>
                </div>
              <% end %>
              <% if day_reservations.count > 3 %>
                <% # Store hidden time slots for the modal %>
                <% day_reservations[3..-1].each do |item| %>
                  <div class="time-slot-card" style="display: none;"
                       data-slot-id="<%= item[:time_slot].id %>"
                       data-slot-time="<%= item[:time_slot].start_time.strftime("%l:%M %p") %>"
                       data-slot-date="<%= item[:time_slot].start_time.strftime("%A, %B %d, %Y") %>"
                       data-max-tables="<%= item[:time_slot].max_tables %>"
                       data-table-capacity="<%= item[:time_slot].table_capacity %>"
                       data-reservation-count="<%= item[:time_slot].reservations.count %>"
                       onclick="openReservationModal(<%= item[:time_slot].id %>)">
                    <%= item[:time_slot].start_time.strftime("%l:%M%p") %>
                    <% item[:time_slot].reservations.each do |reservation| %>
                      <div class="reservation-data-<%= item[:time_slot].id %>" style="display: none;"
                           data-user-name="<%= reservation.user.full_name %>"
                           data-user-email="<%= reservation.user.email %>"
                           data-user-phone="<%= reservation.user.contact_number %>"
                           data-party-size="<%= reservation.party_size %>"
                           data-table-capacity="<%= reservation.table_capacity %>"
                           data-reservation-id="<%= reservation.id %>">
                      </div>
                    <% end %>
                  </div>
                <% end %>
                <div onclick="showMoreTimeSlots(this)" 
                     style="color: #818cf8; font-size: 0.75rem; margin-top: 0.5rem; text-align: center; cursor: pointer; padding: 0.5rem; border-radius: 0.375rem; transition: all 0.2s;"
                     onmouseover="this.style.backgroundColor='rgba(79, 70, 229, 0.2)'; this.style.color='#a5b4fc';"
                     onmouseout="this.style.backgroundColor='transparent'; this.style.color='#818cf8';">
                  +<%= day_reservations.count - 3 %> more (click to view)
                </div>
              <% end %>
            </div>
          <% else %>
            <p style="color: #6b7280; font-size: 0.75rem; text-align: center; font-style: italic;">No reservations</p>
          <% end %>
        </div>
      <% end %>
    </div>

  <% else %>
    <!-- Monthly View -->
    <div style="background: linear-gradient(135deg, rgba(31, 41, 55, 0.6) 0%, rgba(17, 24, 39, 0.6) 100%); border-radius: 0.75rem; padding: 2rem; border: 1px solid rgba(79, 70, 229, 0.2); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);">
      <!-- Day headers -->
      <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.75rem; margin-bottom: 1rem;">
        <% %w[Sun Mon Tue Wed Thu Fri Sat].each do |day| %>
          <div style="text-align: center; font-weight: 600; color: #9ca3af; padding: 0.75rem; font-size: 0.875rem;"><%= day %></div>
        <% end %>
      </div>
      
      <!-- Calendar grid -->
      <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.75rem;">
        <% 
          first_day = @start_date.beginning_of_month
          start_calendar = first_day - first_day.wday.days
          (0..41).each do |i|
            date = start_calendar + i.days
            is_current_month = date.month == @date.month
            is_today = date == Date.today
        %>
          <div style="min-height: 100px; padding: 0.75rem; border: 1px solid <%= is_current_month ? 'rgba(79, 70, 229, 0.2)' : 'rgba(255, 255, 255, 0.05)' %>; border-radius: 0.5rem; background-color: <%= is_current_month ? 'rgba(255, 255, 255, 0.03)' : 'rgba(0, 0, 0, 0.2)' %>;">
            <div style="font-weight: <%= is_today ? '700' : '500' %>; color: <%= is_today ? '#818cf8' : (is_current_month ? '#e5e7eb' : '#6b7280') %>; margin-bottom: 0.5rem; font-size: <%= is_today ? '1.125rem' : '1rem' %>;">
              <%= date.day %>
            </div>
            
            <% if is_current_month %>
              <% day_reservations = @reservations_by_date[date] || [] %>
              <% if day_reservations.any? %>
                <div style="font-size: 0.75rem;">
                  <% day_reservations.first(2).each do |item| %>
                    <div class="time-slot-card"
                         data-slot-id="<%= item[:time_slot].id %>"
                         data-slot-time="<%= item[:time_slot].start_time.strftime("%l:%M %p") %>"
                         data-slot-date="<%= item[:time_slot].start_time.strftime("%A, %B %d, %Y") %>"
                         data-max-tables="<%= item[:time_slot].max_tables %>"
                         data-table-capacity="<%= item[:time_slot].table_capacity %>"
                         data-reservation-count="<%= item[:time_slot].reservations.count %>"
                         onclick="openReservationModal(<%= item[:time_slot].id %>)"
                         style="background: linear-gradient(135deg, rgba(79, 70, 229, 0.25) 0%, rgba(79, 70, 229, 0.15) 100%); padding: 0.25rem 0.375rem; border-radius: 0.25rem; margin-bottom: 0.25rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #d1d5db; border-left: 2px solid #4f46e5; cursor: pointer; transition: all 0.2s;"
                         onmouseover="this.style.backgroundColor='rgba(79, 70, 229, 0.35)';"
                         onmouseout="this.style.background='linear-gradient(135deg, rgba(79, 70, 229, 0.25) 0%, rgba(79, 70, 229, 0.15) 100%)';">
                      <%= item[:time_slot].start_time.strftime("%l:%M%p") %>
                      <% item[:time_slot].reservations.each do |reservation| %>
                        <div class="reservation-data-<%= item[:time_slot].id %>" style="display: none;"
                             data-user-name="<%= reservation.user.full_name %>"
                             data-user-email="<%= reservation.user.email %>"
                             data-user-phone="<%= reservation.user.contact_number %>"
                             data-party-size="<%= reservation.party_size %>"
                             data-table-capacity="<%= reservation.table_capacity %>"
                             data-reservation-id="<%= reservation.id %>">
                        </div>
                      <% end %>
                    </div>
                  <% end %>
                  <% if day_reservations.count > 2 %>
                    <% # Store hidden time slots for the modal %>
                    <% day_reservations[2..-1].each do |item| %>
                      <div class="time-slot-card" style="display: none;"
                           data-slot-id="<%= item[:time_slot].id %>"
                           data-slot-time="<%= item[:time_slot].start_time.strftime("%l:%M %p") %>"
                           data-slot-date="<%= item[:time_slot].start_time.strftime("%A, %B %d, %Y") %>"
                           data-max-tables="<%= item[:time_slot].max_tables %>"
                           data-table-capacity="<%= item[:time_slot].table_capacity %>"
                           data-reservation-count="<%= item[:time_slot].reservations.count %>"
                           onclick="openReservationModal(<%= item[:time_slot].id %>)">
                        <%= item[:time_slot].start_time.strftime("%l:%M%p") %>
                        <% item[:time_slot].reservations.each do |reservation| %>
                          <div class="reservation-data-<%= item[:time_slot].id %>" style="display: none;"
                               data-user-name="<%= reservation.user.full_name %>"
                               data-user-email="<%= reservation.user.email %>"
                               data-user-phone="<%= reservation.user.contact_number %>"
                               data-party-size="<%= reservation.party_size %>"
                               data-table-capacity="<%= reservation.table_capacity %>"
                               data-reservation-id="<%= reservation.id %>">
                          </div>
                        <% end %>
                      </div>
                    <% end %>
                    <div onclick="showMoreTimeSlots(this)" 
                         style="color: #818cf8; font-size: 0.625rem; text-align: center; margin-top: 0.25rem; cursor: pointer; padding: 0.25rem; border-radius: 0.25rem; transition: all 0.2s;"
                         onmouseover="this.style.backgroundColor='rgba(79, 70, 229, 0.2)'; this.style.color='#a5b4fc';"
                         onmouseout="this.style.backgroundColor='transparent'; this.style.color='#818cf8';">
                      +<%= day_reservations.count - 2 %> (click)
                    </div>
                  <% end %>
                </div>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<!-- Reservation Details Modal -->
<div id="reservationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); z-index: 1000; align-items: center; justify-content: center;">
  <div style="background: linear-gradient(135deg, rgba(31, 41, 55, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%); border-radius: 1rem; max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto; border: 2px solid rgba(79, 70, 229, 0.4); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);">
    <!-- Modal Header -->
    <div style="padding: 1.5rem 2rem; border-bottom: 1px solid rgba(79, 70, 229, 0.3); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: linear-gradient(135deg, rgba(31, 41, 55, 1) 0%, rgba(17, 24, 39, 1) 100%); z-index: 10;">
      <div>
        <h2 id="modalTitle" style="font-size: 1.5rem; font-weight: 700; color: #ffffff; margin-bottom: 0.25rem;">Time Slot Details</h2>
        <p id="modalSubtitle" style="color: #9ca3af; font-size: 0.875rem;">Reservation information</p>
      </div>
      <button onclick="closeReservationModal()" style="background: none; border: none; color: #9ca3af; cursor: pointer; font-size: 1.5rem; padding: 0.5rem; transition: all 0.2s;" onmouseover="this.style.color='#ffffff';" onmouseout="this.style.color='#9ca3af';">
        âœ•
      </button>
    </div>
    
    <!-- Modal Body -->
    <div style="padding: 2rem;">
      <!-- Time Slot Info -->
      <div style="background: linear-gradient(135deg, rgba(79, 70, 229, 0.15) 0%, rgba(129, 140, 248, 0.15) 100%); border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid rgba(79, 70, 229, 0.3);">
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
          <div>
            <p style="color: #9ca3af; font-size: 0.875rem; margin-bottom: 0.25rem;">Max Tables</p>
            <p id="modalMaxTables" style="color: #ffffff; font-size: 1.125rem; font-weight: 600;">-</p>
          </div>
          <div>
            <p style="color: #9ca3af; font-size: 0.875rem; margin-bottom: 0.25rem;">Table Capacity</p>
            <p id="modalTableCapacity" style="color: #ffffff; font-size: 1.125rem; font-weight: 600;">-</p>
          </div>
          <div>
            <p style="color: #9ca3af; font-size: 0.875rem; margin-bottom: 0.25rem;">Reservations</p>
            <p id="modalReservationCount" style="color: #818cf8; font-size: 1.125rem; font-weight: 600;">-</p>
          </div>
          <div>
            <p style="color: #9ca3af; font-size: 0.875rem; margin-bottom: 0.25rem;">Available</p>
            <p id="modalAvailable" style="color: #22c55e; font-size: 1.125rem; font-weight: 600;">-</p>
          </div>
        </div>
      </div>
      
      <!-- Reservations List -->
      <div>
        <h3 style="font-size: 1.125rem; font-weight: 600; color: #ffffff; margin-bottom: 1rem;">Customer Reservations</h3>
        <div id="modalReservationsList" style="display: flex; flex-direction: column; gap: 1rem;">
          <!-- Reservations will be inserted here -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function openReservationModal(slotId) {
  const modal = document.getElementById('reservationModal');
  const slotCard = document.querySelector(`[data-slot-id="${slotId}"]`);
  
  if (!slotCard) return;
  
  // Get slot information
  const slotTime = slotCard.getAttribute('data-slot-time');
  const slotDate = slotCard.getAttribute('data-slot-date');
  const maxTables = slotCard.getAttribute('data-max-tables');
  const tableCapacity = slotCard.getAttribute('data-table-capacity');
  const reservationCount = slotCard.getAttribute('data-reservation-count');
  const available = parseInt(maxTables) - parseInt(reservationCount);
  
  // Update modal header
  document.getElementById('modalTitle').textContent = `${slotTime} - Time Slot Details`;
  document.getElementById('modalSubtitle').textContent = slotDate;
  
  // Update slot info
  document.getElementById('modalMaxTables').textContent = `${maxTables} tables`;
  document.getElementById('modalTableCapacity').textContent = `${tableCapacity} people`;
  document.getElementById('modalReservationCount').textContent = `${reservationCount} booked`;
  document.getElementById('modalAvailable').textContent = `${available} available`;
  
  // Update available color
  const availableEl = document.getElementById('modalAvailable');
  if (available > 0) {
    availableEl.style.color = '#22c55e';
  } else {
    availableEl.style.color = '#ef4444';
  }
  
  // Get all reservations for this slot
  const reservations = document.querySelectorAll(`.reservation-data-${slotId}`);
  const reservationsList = document.getElementById('modalReservationsList');
  
  // Clear previous reservations
  reservationsList.innerHTML = '';
  
  if (reservations.length === 0) {
    reservationsList.innerHTML = `
      <div style="text-align: center; padding: 3rem; color: #9ca3af;">
        <p style="font-size: 1.125rem; font-weight: 500; margin-bottom: 0.5rem;">No Reservations Yet</p>
        <p style="font-size: 0.875rem;">This time slot is available for bookings.</p>
      </div>
    `;
  } else {
    reservations.forEach((reservation, index) => {
      const userName = reservation.getAttribute('data-user-name');
      const userEmail = reservation.getAttribute('data-user-email');
      const userPhone = reservation.getAttribute('data-user-phone');
      const partySize = reservation.getAttribute('data-party-size');
      const capacity = reservation.getAttribute('data-table-capacity');
      const reservationId = reservation.getAttribute('data-reservation-id');
      
      const reservationCard = document.createElement('div');
      reservationCard.style.cssText = 'background: linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(79, 70, 229, 0.1) 100%); border-radius: 0.75rem; padding: 1.5rem; border: 1px solid rgba(79, 70, 229, 0.3);';
      
      reservationCard.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
          <div>
            <p style="font-size: 1.125rem; font-weight: 600; color: #ffffff; margin-bottom: 0.25rem;">${userName}</p>
            <p style="color: #9ca3af; font-size: 0.875rem;">${userEmail}</p>
          </div>
          <span style="background: linear-gradient(135deg, #4f46e5 0%, #818cf8 100%); color: white; padding: 0.375rem 0.75rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 500;">Table ${index + 1}</span>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
          <div>
            <p style="color: #9ca3af; font-size: 0.75rem; margin-bottom: 0.25rem;">Contact</p>
            <p style="color: #e5e7eb; font-size: 0.875rem; font-weight: 500;">${userPhone}</p>
          </div>
          <div>
            <p style="color: #9ca3af; font-size: 0.75rem; margin-bottom: 0.25rem;">Party Size</p>
            <p style="color: #818cf8; font-size: 0.875rem; font-weight: 600;">${partySize} people</p>
          </div>
          <div>
            <p style="color: #9ca3af; font-size: 0.75rem; margin-bottom: 0.25rem;">Max Capacity</p>
            <p style="color: #e5e7eb; font-size: 0.875rem; font-weight: 500;">${capacity} people</p>
          </div>
        </div>
      `;
      
      reservationsList.appendChild(reservationCard);
    });
  }
  
  // Show modal with fade-in effect
  modal.style.display = 'flex';
  setTimeout(() => {
    modal.style.opacity = '1';
  }, 10);
}

function closeReservationModal() {
  const modal = document.getElementById('reservationModal');
  modal.style.opacity = '0';
  setTimeout(() => {
    modal.style.display = 'none';
  }, 200);
}

// Close modal when clicking outside
document.getElementById('reservationModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeReservationModal();
  }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeReservationModal();
  }
});

// Add transition for smooth fade
document.getElementById('reservationModal').style.transition = 'opacity 0.2s ease-in-out';

// Show more time slots function
function showMoreTimeSlots(element) {
  // Find the parent container that has all the time slots
  const container = element.parentElement;
  const hiddenSlots = Array.from(container.querySelectorAll('.time-slot-card')).filter(slot => {
    return slot.style.display === 'none' || window.getComputedStyle(slot).display === 'none';
  });
  
  if (hiddenSlots.length > 0) {
    // Show all hidden slots
    hiddenSlots.forEach(slot => {
      slot.style.display = 'block';
      slot.style.background = 'linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(79, 70, 229, 0.1) 100%)';
      slot.style.padding = '0.5rem';
      slot.style.borderRadius = '0.375rem';
      slot.style.marginBottom = '0.5rem';
      slot.style.borderLeft = '2px solid #4f46e5';
      slot.style.color = '#e5e7eb';
      slot.style.cursor = 'pointer';
      slot.style.transition = 'all 0.2s';
      slot.style.fontSize = '0.875rem';
      
      // Add hover effects
      slot.onmouseover = function() {
        this.style.backgroundColor = 'rgba(79, 70, 229, 0.3)';
      };
      slot.onmouseout = function() {
        this.style.background = 'linear-gradient(135deg, rgba(79, 70, 229, 0.2) 0%, rgba(79, 70, 229, 0.1) 100%)';
      };
    });
    
    // Hide the "more" button
    element.style.display = 'none';
  }
}
</script>