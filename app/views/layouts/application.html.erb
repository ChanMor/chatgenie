<!DOCTYPE html>
<html>
  <head>
    <title>Restaurant Reservations</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application" %>
  </head>

  <body style="background-color: #111827; font-family: system-ui, -apple-system, sans-serif; color: #e5e7eb; min-height: 100vh;">
    <%# Render the navigation bar partial %>
    <%= render 'layouts/navigation' %>

    <%# Toast Notifications - Overlay Style %>
    <% if flash.any? %>
      <div id="toastContainer" style="position: fixed; top: 1rem; right: 1rem; z-index: 9999; display: flex; flex-direction: column; gap: 0.75rem; max-width: 400px;">
        <% flash.each do |type, message| %>
          <% 
            # Define styles based on flash type
            if type == 'notice'
              bg_gradient = 'linear-gradient(135deg, rgba(34, 197, 94, 0.95) 0%, rgba(22, 163, 74, 0.95) 100%)'
              border_color = '#22c55e'
              text_color = '#ffffff'
            elsif type == 'alert'
              bg_gradient = 'linear-gradient(135deg, rgba(239, 68, 68, 0.95) 0%, rgba(220, 38, 38, 0.95) 100%)'
              border_color = '#ef4444'
              text_color = '#ffffff'
            else
              bg_gradient = 'linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(79, 70, 229, 0.95) 100%)'
              border_color = '#3b82f6'
              text_color = '#ffffff'
            end
          %>
          <div class="toast-message" style="background: <%= bg_gradient %>; border-left: 4px solid <%= border_color %>; padding: 1rem 1.5rem; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2); animation: slideIn 0.3s ease-out;">
            <p style="color: <%= text_color %>; font-weight: 500; margin: 0; font-size: 0.875rem;"><%= message %></p>
          </div>
        <% end %>
      </div>
      
      <style>
        @keyframes slideIn {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes slideOut {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(400px);
            opacity: 0;
          }
        }
        
        .toast-message.fade-out {
          animation: slideOut 0.3s ease-in forwards;
        }
      </style>
      
      <script>
        // Auto-dismiss toast messages after 3 seconds
        document.addEventListener('DOMContentLoaded', function() {
          const toasts = document.querySelectorAll('.toast-message');
          toasts.forEach(function(toast) {
            setTimeout(function() {
              toast.classList.add('fade-out');
              setTimeout(function() {
                toast.remove();
                // Remove container if no toasts left
                const container = document.getElementById('toastContainer');
                if (container && container.children.length === 0) {
                  container.remove();
                }
              }, 300);
            }, 3000);
          });
        });
      </script>
    <% end %>

    <main>
      <%= yield %>
    </main>
  </body>
</html>